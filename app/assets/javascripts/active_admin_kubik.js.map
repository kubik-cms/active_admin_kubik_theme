{"mappings":"AAEAA,SAASC,iBAAiB,oBAAoB,WAC5CD,SAASE,iBAAiB,6BAA6BC,SAAQ,SAASC,GACtEA,EAAQH,iBAAiB,SAAS,SAASI,GACvCA,EAAEC,iBACFD,EAAEE,OAAOC,WAAWC,UAAUC,OAAO,gBAK3CV,SAASW,eAAe,UAAUC,mBAAmB,aAAc,gDAEnEZ,SAASa,cAAc,wBAAwBZ,iBAAiB,SAAS,WACnED,SAASa,cAAc,wBAAwBJ,UAAUK,SAAS,QACpEC,IAEAC,OAIChB,SAASa,cAAc,+BAC1BI,IAGFC,OAAOjB,iBAAiB,UAAU,WAChCgB,OAGF,IAAME,EAAUnB,SAASW,eAAe,WAClCS,EAAiBpB,SAASW,eAAe,kBACzCU,EAAsBrB,SAASa,cAAc,wBAC7CS,EAAOtB,SAASW,eAAe,QAC/BY,EAAavB,SAASW,eAAe,cACrCa,EAAcxB,SAASW,eAAe,wBAEnCI,IAEJI,GACDA,EAAQV,UAAUgB,IAAI,mBAEpBL,GACFA,EAAeX,UAAUgB,IAAI,mBAE3BJ,IACFA,EAAoBZ,UAAUiB,OAAO,QACrCL,EAAoBZ,UAAUgB,IAAI,WAEhCH,IACFA,EAAKK,MAAMC,QAAU,QAEnBL,IACFA,EAAWI,MAAMC,QAAU,QAEzBJ,IACFA,EAAYG,MAAMC,QAAU,iBAIvBZ,IACHG,GACFA,EAAQV,UAAUiB,OAAO,mBAEvBN,GACFA,EAAeX,UAAUiB,OAAO,mBAE9BL,IACFA,EAAoBZ,UAAUiB,OAAO,UACrCL,EAAoBZ,UAAUgB,IAAI,SAEhCH,IACFA,EAAKK,MAAMC,QAAU,SAEnBL,IACFA,EAAWI,MAAMC,QAAU,SAEzBJ,IACFA,EAAYG,MAAMC,QAAU,kBAIvBX,IACHC,OAAOW,WAjFK,KAkFdb,IAEAD,IAoDJ,GA/CAf,SAASE,iBAAiB,uBAAuBC,SAAQ,SAASC,GAChE,IAAM0B,EAAUC,MAAMC,KAAK5B,EAAQF,iBAAiB,oBAAoB+B,KAAI,SAASC,GACnF,OAAOA,EAAOC,YAAYC,UAE5BL,MAAMC,KAAK5B,EAAQF,iBAAiB,eAAeC,SAAQ,SAASkC,GAClEN,MAAMC,KAAKK,EAAInC,iBAAiB,OAAOC,SAAQ,SAASmC,EAAKC,GAC3DD,EAAIE,aAAa,qBAAsBV,EAAQS,GAAS,eAQ9DvC,SAASE,iBAAiB,mDAAmDC,SAAQ,SAASsC,GAC5FA,EAASxC,iBAAiB,UAAU,WAC9BD,SAASE,iBAAiB,2DAA2DwC,OACvF1C,SAASa,cAAc,2BAA2Bc,MAAMC,QAAU,QAElE5B,SAASa,cAAc,2BAA2Bc,MAAMC,QAAU,aAKxE5B,SAASE,iBAAiB,0DAA0DC,SAAQ,SAASsC,GACnGA,EAASxC,iBAAiB,UAAU,WAC9BD,SAASE,iBAAiB,kEAAkEwC,OAC9F1C,SAASa,cAAc,2BAA2Bc,MAAMC,QAAU,QAElE5B,SAASa,cAAc,2BAA2Bc,MAAMC,QAAU,aAQpE5B,SAASE,iBAAiB,8BAA8BwC,SAC1DC,YAAW,WACT3C,SAAS4C,uBAAuB,SAAS,GAAGnC,UAAUgB,IAAI,UACzD,MACHkB,YAAW,WACT3C,SAAS4C,uBAAuB,SAAS,GAAGlB,WAC3C,MAID1B,SAASE,iBAAiB,8CAA8CwC,OAAQ,CAClF,IAAMG,EAAe7C,SAAS8C,cAAc,OAC5CD,EAAapC,UAAUgB,IAAI,iBAC3BoB,EAAaV,YAAc,eAC3BnC,SAASa,cAAc,8BAA8BkC,YAAYF,GACjEA,EAAa5C,iBAAiB,SAAS,SAASI,GAC9C,IAAM2C,EAAUhD,SAASa,cAAc,kCACjCoC,EAAsBjD,SAASa,cAAc,+CACnDmC,EAAQvC,UAAUC,OAAO,YACzBuC,EAAoBxC,UAAUC,OAAO,oBACjCsC,EAAQvC,UAAUK,SAAS,YAC7B+B,EAAaV,YAAc,eAE3BU,EAAaV,YAAc,kBAUjC,GAAInC,SAASE,iBAAiB,oDAAoDwC,OAAQ,CACxF,IAAMQ,EAAanB,MAAMC,KAAKhC,SAASa,cAAc,gBAAgBsC,UAAUC,QAAO,SAACC,EAAKC,EAAKf,GAI/F,OAHoC,OAAhCe,EAAIzC,cAAc,WACpBwC,EAAIE,KAAKhB,GAEJc,IACN,IACuB,IAAtBH,EAAWR,QACG1C,SAASE,iBAAiB,8BAClCC,SAAQ,SAACmD,EAAKf,GAChBA,IAAUW,EAAW,IACvBI,EAAIzC,cAAc,KAAK2C,QAErBN,EAAWO,SAASlB,IACtBe,EAAI7C,UAAUgB,IAAI","sources":["src/javascripts/active_admin_kubik.js"],"sourcesContent":["\nconst large_break = 1200;\ndocument.addEventListener('DOMContentLoaded', function() {\n  document.querySelectorAll('.menu_item.has_nested > a').forEach(function(element) {\n    element.addEventListener('click', function(e) {\n        e.preventDefault();\n        e.target.parentNode.classList.toggle('active');\n    });\n  });\n\n  // Navigation bar toggle\n  document.getElementById('header').insertAdjacentHTML('afterbegin', '<div class=\"open kubik_header_toggle\"></div>');\n\n  document.querySelector('.kubik_header_toggle').addEventListener('click', function() {\n    if (document.querySelector('.kubik_header_toggle').classList.contains('open')) {\n      closeMenu();\n    } else {\n      openMenu();\n    }\n  });\n\n  if (!document.querySelector(\".logged_in.admin_dashboard\")) {\n    windowSizeChecker();\n  }\n\n  window.addEventListener('resize', function() {\n    windowSizeChecker();\n  });\n\n  const wrapper = document.getElementById('wrapper')\n  const custom_wrapper = document.getElementById('custom-wrapper')\n  const kubik_header_toggle = document.querySelector('.kubik_header_toggle')\n  const tabs = document.getElementById('tabs')\n  const site_title = document.getElementById('site_title')\n  const utility_nav = document.getElementById('utility_nav')\n\n  function closeMenu() {\n\n    if(wrapper) {\n      wrapper.classList.add('minimise_header');\n    }\n    if (custom_wrapper) {\n      custom_wrapper.classList.add('minimise_header');\n    }\n    if (kubik_header_toggle) {\n      kubik_header_toggle.classList.remove('open');\n      kubik_header_toggle.classList.add('closed');\n    }\n    if (tabs) {\n      tabs.style.display = 'none';\n    }\n    if (site_title) {\n      site_title.style.display = 'none';\n    }\n    if (utility_nav) {\n      utility_nav.style.display = 'none';\n    }\n  }\n\n  function openMenu() {\n    if (wrapper) {\n      wrapper.classList.remove('minimise_header');\n    }\n    if (custom_wrapper) {\n      custom_wrapper.classList.remove('minimise_header');\n    }\n    if (kubik_header_toggle) {\n      kubik_header_toggle.classList.remove('closed');\n      kubik_header_toggle.classList.add('open');\n    }\n    if (tabs) {\n      tabs.style.display = 'block';\n    }\n    if (site_title) {\n      site_title.style.display = 'block';\n    }\n    if (utility_nav) {\n      utility_nav.style.display = 'block';\n    }\n  }\n\n  function windowSizeChecker() {\n    if (window.innerWidth > large_break) {\n      openMenu();\n    } else {\n      closeMenu();\n    }\n  }\n\n  // Move table headers to mobile cards\n  document.querySelectorAll('.index .index_table').forEach(function(element) {\n    const headers = Array.from(element.querySelectorAll('thead > tr > th')).map(function(header) {\n      return header.textContent.trim();\n    });\n    Array.from(element.querySelectorAll('tbody > tr')).forEach(function(row) {\n      Array.from(row.querySelectorAll('td')).forEach(function(col, index) {\n        col.setAttribute('data-column_header', headers[index] + \": \");\n      });\n    });\n  });\n\n  /******************************************************************\n  // Hide batch actions when not needed\n  /******************************************************************/\n  document.querySelectorAll('.resource_selection_cell input[type=\"checkbox\"]').forEach(function(checkbox) {\n    checkbox.addEventListener('change', function() {\n      if (document.querySelectorAll('.resource_selection_cell input[type=\"checkbox\"]:checked').length) {\n        document.querySelector('.batch_actions_selector').style.display = 'block';\n      } else {\n        document.querySelector('.batch_actions_selector').style.display = 'none';\n      }\n    });\n  });\n\n  document.querySelectorAll('.resource_selection_toggle_cell input[type=\"checkbox\"]').forEach(function(checkbox) {\n    checkbox.addEventListener('change', function() {\n      if (document.querySelectorAll('.resource_selection_toggle_cell input[type=\"checkbox\"]:checked').length) {\n        document.querySelector('.batch_actions_selector').style.display = 'block';\n      } else {\n        document.querySelector('.batch_actions_selector').style.display = 'none';\n      }\n    });\n  });\n\n  /******************************************************************\n  // Hide flash messages after certain time\n  /******************************************************************/\n  if (document.querySelectorAll(\".logged_in .flashes .flash\").length) {\n    setTimeout(function() {\n      document.getElementsByClassName('flash')[0].classList.add(\"hide\");\n    }, 2500);\n    setTimeout(function() {\n      document.getElementsByClassName('flash')[0].remove();\n    }, 3000);\n  }\n\n  // Sidebar\n  if (document.querySelectorAll('.index.logged_in #sidebar .sidebar_section').length) {\n    const filterToggle = document.createElement('div');\n    filterToggle.classList.add('filter_toggle');\n    filterToggle.textContent = 'Show filters';\n    document.querySelector('#main_content .table_tools').appendChild(filterToggle);\n    filterToggle.addEventListener('click', function(e) {\n      const sidebar = document.querySelector('#active_admin_content #sidebar');\n      const collectionSelection = document.querySelector('#active_admin_content #collection_selection');\n      sidebar.classList.toggle('expanded');\n      collectionSelection.classList.toggle('sidebar_expanded');\n      if (sidebar.classList.contains('expanded')) {\n        filterToggle.textContent = 'Hide filters';\n      } else {\n        filterToggle.textContent = 'Show filters';\n      }\n    });\n  }\n\n  /******************************************************************\n  // Form Tabs\n  /******************************************************************/\n\n  //Highlight the first tab with contents that have an error\n  if (document.querySelectorAll('.logged_in.create .tabs, .logged_in.update .tabs').length) {\n    const errorIndex = Array.from(document.querySelector('.tab-content').children).reduce((acc, tab, index) => {\n      if (tab.querySelector('.error') !== null) {\n        acc.push(index);\n      }\n      return acc;\n    }, []);\n    if (errorIndex.length !== 0) {\n      const navTabs = document.querySelectorAll('.nav.nav-tabs .ui-tabs-tab');\n      navTabs.forEach((tab, index) => {\n        if (index === errorIndex[0]) {\n          tab.querySelector('a').click();\n        }\n        if (errorIndex.includes(index)) {\n          tab.classList.add('ui-tabs-error');\n        }\n      });\n    }\n  }\n})\n"],"names":["document","addEventListener","querySelectorAll","forEach","element","e","preventDefault","target","parentNode","classList","toggle","getElementById","insertAdjacentHTML","querySelector","contains","closeMenu","openMenu","windowSizeChecker","window","wrapper","custom_wrapper","kubik_header_toggle","tabs","site_title","utility_nav","add","remove","style","display","innerWidth","headers","Array","from","map","header","textContent","trim","row","col","index","setAttribute","checkbox","length","setTimeout","getElementsByClassName","filterToggle","createElement","appendChild","sidebar","collectionSelection","errorIndex","children","reduce","acc","tab","push","click","includes"],"version":3,"file":"active_admin_kubik.js.map"}